Функция: Автоматический мониторинг уровня товарных запасов
  Background:
    Допустим в системе настроены минимальные уровни запаса
    И для товара "SKU-001" установлен минимальный уровень 10 единиц

  Сценарий: Автоматическое уведомление о достижении точки заказа
    Дано товар "SKU-001" имеет текущий остаток 9 единиц
    И бот выполняет регулярную проверку запасов
    Когда уровень запаса падает ниже минимального
    Тогда бот отправляет push-уведомление менеджеру
    И в уведомлении указаны:
      | Поле          | Значение               |
      | Товар         | SKU-001                |
      | Текущий остаток | 9 шт.                |
      | Минимальный уровень | 10 шт.          |
      | Рекомендуемый заказ | 50 шт.          |

  Сценарий: Уведомление о критическом запасе
    Дано товар "SKU-002" имеет текущий остаток 2 единицы
    И для товара установлен критический уровень 5 единиц
    Когда уровень становится критическим
    Тогда бот отправляет срочное уведомление
    И уведомление помечается как "СРОЧНО"
    И бот дублирует уведомление на email менеджера


Функция: Мобильная приемка товара со сканированием штрих-кодов
  Background:
    Допустим я авторизован в боте как "Кладовщик"
    И ожидается поставка по накладной "INV-2024-001"

  Сценарий: Успешная приемка товара со сканированием
    Когда я отправляю команду "/приемка_start INV-2024-001"
    Тогда бот переходит в режим сканирования
    И показывает инструкцию: "Наведите камеру на штрих-код"
    
    Когда я сканирую штрих-код "5901234123457"
    Тогда бот распознает товар "Кофе Jacobs 250г"
    И показывает форму для ввода количества
    И предлагает поля: количество, срок годности, качество
    
    Когда я ввожу количество "50"
    И ввожу срок годности "2025-12-31"
    И выбираю качество "Отличное"
    Тогда бот подтверждает: "Товар добавлен в приемку"
    И обновляет общий счетчик принятых позиций
    
    Когда я завершаю приемку командой "/приемка_завершить"
    Тогда бот создает цифровой акт приемки
    И отправляет его на утверждение менеджеру
    И автоматически обновляет складские остатки

  Сценарий: Обнаружение расхождения при приемке
    Допустим в заказе указано 100 единиц товара "SKU-005"
    Когда я сканирую товар "SKU-005"
    И ввожу фактическое количество "95"
    Тогда бот обнаруживает расхождение 5 единиц
    И предлагает создать акт расхождений
    
    Когда я выбираю "Создать акт расхождений"
    И указываю причину "Недостача при поставке"
    И делаю фото упаковки
    Тогда бот создает цифровой акт расхождений
    И отправляет его поставщику и отделу закупок
    И прикрепляет фотодоказательства

Функция: Автоматическая генерация заявок на закупку
  Сценарий: Автоматическое создание заявки при низком запасе
    Допустим для товара "<sku>" установлены параметры:
      | Параметр               | Значение |
      | Минимальный запас      | <min>    |
      | Точка заказа           | <point>  |
      | Размер заказа          | <order>  |
      | Основной поставщик     | <supplier> |
    
    Когда остаток товара "<sku>" достигает <current> единиц
    И бот выполняет проверку запасов
    Тогда бот автоматически создает заявку на закупку
    И в заявке указаны:
      | Поле                | Значение           |
      | Товар               | <sku>              |
      | Текущий остаток     | <current>          |
      | Заказываемое количество | <order>       |
      | Поставщик           | <supplier>         |
      | Срок поставки       | 3 рабочих дня      |
    
    И бот отправляет заявку на утверждение менеджеру
    И заявка имеет статус "На согласовании"

    Пример:
      | sku     | min | point | order | supplier       | current |
      | SKU-100 | 20  | 25    | 100   | Поставщик А    | 18      |
      | SKU-200 | 15  | 20    | 75    | Поставщик Б    | 14      |
      | SKU-300 | 30  | 35    | 150   | Поставщик В    | 28      |

  Сценарий: Быстрое создание заявки через команду
    Дано я авторизован как "Менеджер по закупкам"
    Когда я отправляю команду "/заявка_создать SKU-999, 50, Срочно"
    Тогда бот создает заявку с приоритетом "Срочно"
    И отправляет запрос коммерческих предложений поставщикам
    И начинает отслеживание сроков ответа

Функция: Управление пополнением торговых полок
  Сценарий: Получение задания на пополнение полки
    Допустим на полке "А-12" низкий запас товара "SKU-777"
    И система генерирует задание на пополнение
    Когда бот отправляет уведомление мерчендайзеру
    Тогда в уведомлении содержится:
      | Информация          | Значение               |
      | Полка               | А-12                   |
      | Товар               | SKU-777                |
      | Необходимое количество | 20 шт.             |
      | Место на складе     | Секция B, Ячейка 45    |
      | Приоритет           | Высокий                |
    
    И мерчендайзер может подтвердить задание кнопкой "Принято"
    Или отклонить с указанием причины

  Сценарий: Выполнение задания с фотоотчетом
    Дано я получил задание на пополнение полки "А-12"
    Когда я прихожу на склад
    И сканирую штрих-код ячейки "B-45"
    Тогда бот подтверждает правильность местоположения
    
    Когда я беру 20 единиц товара
    И сканирую каждый товар для учета
    Тогда бот уменьшает остаток на складе в реальном времени
    
    Когда я выкладываю товар на полку "А-12"
    И делаю фото выкладки
    И отправляю фото в бот
    Тогда бот отмечает задание как выполненное
    И обновляет остаток на полке в системе
    И отправляет отчет менеджеру


Функция: Проведение инвентаризации с помощью бота
  Background:
    Допустим назначена инвентаризация зоны "Секция А"
    И я назначен ответственным

  Сценарий: Циклическая инвентаризация зоны
    Когда я отправляю команду "/инвентаризация_начать Секция А"
    Тогда бот генерирует список товаров для проверки
    И предоставляет интерфейс поштучного пересчета
    
    Когда я сканирую штрих-код товара "SKU-888"
    И ввожу фактическое количество "25"
    Тогда бот сравнивает с системным остатком "23"
    И показывает расхождение "+2"
    
    Когда я подтверждаю расхождение
    И указываю причину "Ошибка предыдущей приемки"
    Тогда бот корректирует остатки в системе
    И записывает запись в журнал инвентаризации
    
    Когда я завершаю инвентаризацию зоны
    Тогда бот генерирует отчет по зоне
    И вычисляет точность учета: "98.5%"
    И отправляет отчет руководителю

Функция: Управление товарным ассортиментом
  Сценарий: Добавление новой товарной категории
    Дано я анализирую рыночные тренды
    И выявляю потребность в новой категории "Эко-товары"
    Когда я отправляю команду "/категория_добавить Эко-товары"
    И указываю параметры:
      | Параметр           | Значение            |
      | Маржинальность     | 35%                 |
      | Оборачиваемость    | 8 раз в год         |
      | Поставщики         | EcoSuppliers        |
      | Целевая аудитория  | 25-45 лет           |
    
    Тогда бот создает новую категорию
    И добавляет ее в товарную матрицу
    И отправляет на утверждение руководству
    И планирует задачи по поиску поставщиков

  Сценарий: Анализ рентабельности категории
    Когда я отправляю команду "/анализ_категории Напитки"
    Тогда бот генерирует отчет за последний квартал
    И показывает показатели:
      | Показатель              | Значение     |
      | Выручка                 | 1,200,000 руб |
      | Маржа                   | 28%          |
      | Оборачиваемость         | 6.5 раз      |
      | ROI                     | 45%          |
      | Рекомендация            | Расширить    |
    
    И предлагает действия:
      - Увеличить закупки топ-5 SKU
      - Снизить закупки низкорентабельных позиций
      - Запустить промо-акцию


Функция: Цифровое оформление документов
  Сценарий: Оформление акта о браке
    Допустим я обнаружил бракованный товар
    Когда я отправляю команду "/акт_брак"
    И сканирую штрих-код товара
    И выбираю тип брака: "Производственный дефект"
    И делаю фотографии повреждений
    И указываю количество: "5 шт."
    
    Тогда бот создает цифровой акт
    И присваивает номер "АКТ-БРАК-2024-001"
    И автоматически заполняет реквизиты:
      | Поле              | Значение               |
      | Дата              | Текущая дата           |
      | Товар             | Из сканирования       |
      | Ответственный     | Мой профиль            |
      | Основание         | Результат проверки     |
    
    И отправляет акт на утверждение
    И уведомляет отдел закупок о необходимости возврата
    И резервирует товар на складе для возврата

  Сценарий: Электронная подпись документов
    Дано мне пришел на утверждение акт "АКТ-001"
    Когда я открываю документ в боте
    И проверяю все данные
    И отправляю команду "/подписать"
    Тогда бот добавляет мою электронную подпись
    И фиксирует время подписания
    И отправляет документ в архив
    И уведомляет все заинтересованные стороны


Функция: Взаимодействие с аналитическим дашбордом
  Сценарий: Получение сводного отчета за день
    Когда я отправляю команду "/отчет_день"
    Тогда бот собирает данные за текущий день
    И формирует сводку:
      | Показатель                | Значение       |
      | Приемок товара            | 3 накладные    |
      | Продаж                    | 45 транзакций  |
      | Выручка                   | 150,000 руб    |
      | Пополнено полок           | 12 заданий     |
      | Создано заявок на закупку | 5 заявок       |
    
    И предоставляет ссылку на детальный дашборд
    И на дашборде отображаются те же данные в реальном времени

  Scenario: Мониторинг KPI в реальном времени
    Дано дашборд обновляется каждые 5 секунд
    Когда в системе происходит событие (продажа, приемка, списание)
    Тогда бот обновляет данные на дашборде немедленно
    И показатели KPI пересчитываются в реальном времени
    И на дашборде видны все изменения без перезагрузки страницы
    
    Пример:
      - Продажа товара → уменьшение остатков, увеличение выручки
      - Приемка товара → увеличение запасов, обновление стоимости
      - Списание брака → корректировка остатков, учет потерь